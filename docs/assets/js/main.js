"use strict";const input=document.querySelector(".js_input"),butonSearch=document.querySelector(".js_button"),resultsContainer=document.querySelector(".js_results"),favoritesContainer=document.querySelector(".js_favorites"),butonReset=document.querySelector(".js_reset"),imageDefautl="https://via.placeholder.com/210x295/ffffff/666666/?text=TV";let globalData=[],favorites=[];function handleSearch(e){e.preventDefault();let t=input.value.toLowerCase();fetch("//api.tvmaze.com/search/shows?q="+t).then(e=>e.json()).then(e=>{globalData=e,paintInput()}),console.log(t)}function handleListResults(e){const t=parseInt(e.currentTarget.id),s=globalData.find(e=>e.show.id===t),o=favorites.findIndex(e=>e.show.id===t);-1===o?favorites.push(s):favorites.splice(o,1),console.log(o),console.log(favorites),console.log(o),setLocalStorage(),paintFavorites(),paintInput()}function listenListResults(){const e=document.querySelectorAll(".js_list");for(const t of e)t.addEventListener("click",handleListResults)}function isFavorite(e){return void 0!==favorites.find(t=>t.show.id===e.show.id)}function paintInput(){resultsContainer.innerHTML="";let e="";for(const t of globalData){e=!0===isFavorite(t)?"selected":"",null===t.show.image?resultsContainer.innerHTML+=` <li class = "results__list js_list ${e}" id = "${t.show.id}"><img src="${imageDefautl} "alt=""/><h2 class = "results__name">${t.show.name}</h2></li>`:resultsContainer.innerHTML+=` <li class = "results__list js_list ${e}" id = "${t.show.id}"><img src="${t.show.image.medium} "alt=""/><h2 class = "results__name">${t.show.name}</h2></li>`}listenListResults()}function handleListFavResults(e){const t=parseInt(e.currentTarget.id),s=globalData.find(e=>e.show.id===t),o=favorites.findIndex(e=>e.show.id===t);-1===o?favorites.push(s):favorites.splice(o,1),setLocalStorage(),paintFavorites(),paintInput()}function listenListFavResults(){const e=document.querySelectorAll(".js_list");for(const t of e)t.addEventListener("click",handleListFavResults)}function paintFavorites(){let e="";for(const t of favorites)null===t.show.image?e+=`<li class = "favorites__list js_list" id = "${t.show.id}"><img src="${imageDefautl}"alt=""/><h2 class = "favorites__name">${t.show.name}></h2></li>`:e+=`<li class = "favorites__list js_list" id = "${t.show.id}"><img src="${t.show.image.medium} "alt=""/><h2 class = "favorites__name">${t.show.name}></h2></li>`;favoritesContainer.innerHTML=e,setLocalStorage()}function setLocalStorage(){localStorage.setItem("selected",JSON.stringify(favorites))}function getLocalStorage(){favorites=JSON.parse(localStorage.getItem("selected")),paintFavorites()}function handleReset(e){e.preventDefault(),favorites=[],localStorage.clear(),location.reload()}null!==localStorage.getItem("selected")&&getLocalStorage(),butonSearch.addEventListener("click",handleSearch),butonReset.addEventListener("click",handleReset);