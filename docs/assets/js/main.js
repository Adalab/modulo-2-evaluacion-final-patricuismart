"use strict";const input=document.querySelector(".js_input"),butonSearch=document.querySelector(".js_button"),resultsContainer=document.querySelector(".js_results"),favoritesContainer=document.querySelector(".js_favorites"),imageDefautl="https://via.placeholder.com/210x295/ffffff/666666/?text=TV";let globalData=[],favorites=[];function handleSearch(e){e.preventDefault();let t=input.value.toLowerCase();fetch("//api.tvmaze.com/search/shows?q="+t).then(e=>e.json()).then(e=>{globalData=e,paintInput()}),console.log(t)}function paintInput(){resultsContainer.innerHTML="";for(const e of globalData)null===e.show.image?resultsContainer.innerHTML+=` <li class = "results__list js_list" id = "${e.show.id}"><img src="${imageDefautl} "alt=""/><h2 class = "results__name">${e.show.name}</h2></li>`:resultsContainer.innerHTML+=` <li class = "results__list js_list " id = "${e.show.id}"><img src="${e.show.image.medium} "alt=""/><h2 class = "results__name">${e.show.name}</h2></li>`;listenListResults()}function handleListResults(e){const t=parseInt(e.currentTarget.id),s=globalData.find(e=>e.show.id===t),o=favorites.findIndex(e=>e.show.id===t);-1===o?favorites.push(s):favorites.splice(o,1),console.log(o),console.log(favorites),console.log(o),e.currentTarget.classList.toggle("selected"),paintFavorites()}function listenListResults(){const e=document.querySelectorAll(".js_list");for(const t of e)t.addEventListener("click",handleListResults)}function handleListFavResults(e){const t=parseInt(e.currentTarget.id),s=globalData.find(e=>e.show.id===t),o=favorites.findIndex(e=>e.show.id===t);-1===o?favorites.push(s):favorites.splice(o,1),setLocalStorage(),paintFavorites()}function listenListFavResults(){console.log("imin2");const e=document.querySelectorAll(".js_list");for(const t of e)t.addEventListener("click",handleListFavResults)}function paintFavorites(){let e="";console.log("imin");for(const t of favorites)null===t.show.image?e+=`<li class = "favorites__list js_list" id = "${t.show.id}"><img src="${imageDefautl}"alt=""/><h2 class = "favorites__name">${t.show.name}></h2></li>`:e+=`<li class = "favorites__list js_list" id = "${t.show.id}"><img src="${t.show.image.medium} "alt=""/><h2 class = "favorites__name">${t.show.name}></h2></li>`;favoritesContainer.innerHTML=e,setLocalStorage()}function setLocalStorage(){localStorage.setItem("selected",JSON.stringify(favorites))}function getLocalStorage(){favorites=JSON.parse(localStorage.getItem("selected")),paintFavorites()}null!==localStorage.getItem("selected")&&getLocalStorage(),butonSearch.addEventListener("click",handleSearch);